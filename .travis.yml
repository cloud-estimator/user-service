language: java
cache:
  directories:
  - "$HOME/.m2"
sudo: required
services:
- docker
notifications:
  email:
  - ci@estimator.cloud
  on_success: always
  on_failure: always
branches:
  only:
  - master
before_install:
- gem install travis -v 1.8.8 --no-rdoc --no-ri
- sudo curl -k -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- export BUILD_NAME=user-service-$TRAVIS_BRANCH-$(date -u "+%Y%m%d%H%M%S")-$TRAVIS_BUILD_NUMBER
script:
- sh travis_scripts/tag_build.sh
- sh travis_scripts/build_services.sh
- sh travis_scripts/deploy_to_docker_hub.sh
- sh travis_scripts/deploy_to_amazon_ecs.sh
env:
  global:
  - secure: JX5gnh/+BAjo5nTWxVH0Jt5X10Bs1HbaWZtkHWRlI6qRvGJaPyLOGUeh0uABwtxZaMzYFLhB2ZiM6vlg9kPAYcZcRq03n8C7I/f78PvEMl1yGYzEY8BT/1eDJLqM5K2Ngyqm7AEx+bFKtnGCVmluTb2q5iJ+WvSwfugT+q8VmxsiL18ZaJH/g6om9S5D3+Zy9qvGlHheemqKF28O464IUPe/44wAufYrAWlrxKo2PVn7SsEVJZXzDqDiadCFH2DjDoWSQByfuCcJD+heaTAEDdwjs3Rqry99CG05Gr8kTghYuGlJh9QxbOpa+1tQFjllojxAViMRpv3yQz7PnhZDFlyuDNrKJNOXo9DwMFeQE25GA7orYODs9v/qU6AS5ilS5LLqyL4BZI0lpadbqe7WxvlBWXGQWLnB3Had3/7CYRjQ4HT2lFOaTzjZ8oDocEo1NhFWvFIKRZwqeuHM2vCCwJZMTAWBVg5jY7s0wjZFjI0wYnf7jOWB0sBLR1lwQEGszms7MmV4kKdQ3aLm2S99L/6YWthPZokvxPpFuDorufa0eWgpgUH2dCxpbx/BW8pMl4kCSFW6y1YWeBa/YzwLI9nDiO53bQOnN7jDc5u4dhJnkjLgdulrKMegDZSYGHYvgh6HCaARrhloq/i9G/LBaw38sbFazFj0iHnA1BPoS68=
  - secure: nt5xL3P/OU388h+ytYW3iOWtGPedukBbBtk+6KZpHQljCYQnHXhTH1x2+mDCyQpRSor9w4A+Pt0nT1GTY+/bsn0q6ap0EIt1bKhogcCinbYql09J0wzgLWP8kEjfFF03aa7cdH+Lc+kKeEXxujtHH6mIB64dCfByWN+8IWZj3vD5vA8ZuWPy4HLHcOhp/mAxraSlXQpmy91y9N7A40OS8zUzcOFpuhSKAq15O69NOBsqHN8FYQWmo1DIWAbZQxK+GIux1F1Qe0xZBspY40lPq0DzUU1Evk/SyUT9aO5eYJEIZ1urYpf0r6ydW+bCfrz7x2eV1N9679FaNKFf9lfAKDr4rlyJHdvRDuNgMusa/aEfFP8FpMZ4XZdy1KLZCDeBF/kai33m/Ru8wvmWSx3cdPlXRd2n5A1hLkVoisGbmHPKdqiSLqCSCi3FHDAAfCVAbT0R79aXPuuTogHe5cmsQ4tUUPOwNptm6jYd/ceuiUacKqdfpqOu314S74Bv6je4Y1Vy2UyL7A6OQG0qerxFIBsxmidPkhmBX3vdUeny5Ht1MSyR66UCWfFCQC946DI322D8bVADHUFSgj78/rknalgu7E0Al2DblnPEiYY0lt0JCJOzPJZIvMMHeDxkPt5vyzH/VT5KoakmwHpYLhc3GIrsac1HmQLiFXC8LSKODRs=
  - secure: ANDMoPEYERbzUtout0kRIbIvdIxwO27NSKnjMOK0L9eg7l+IDevoqZClBBs+jNQXZd6xWjPwDFsIfWVncYZsZPT+KA5gmMgOvevcawoHDIhp+iHE07ducWhrFtHxz4D7IQrCH/zkkVWjcaVgJI26vVvwVoJkBZ/bnetlde2h5sQdDV1QSuOUSmUlRYbfnLOp2eg/wKtZ91rNe+EY8q5LJ7uhGs70A8MBvDC/XK7eTY7wxdDNh5MwwTP5/GRWEUfpxHeFO3ivz0mDt6htK0Te1FziSQUe18m1kBGNjuNOALVZ1B5EasIpONE6FxtmDQpHSqLZlPY4lAk0iYRZeogkfiMphdLB+8QXWsWj8EuZhwymYK4L92jKoZQ8QuIpp3chG/qEWKOfduTbMp+BY/FllqT9OoxkvHlDV56WLBcEslG3D8XllaT7nblbxgMeSfa0BgpiE5P9O8wRxKeg5VKvUqnrexCZ5z3c1FriO8s8oyDOKeE7VW7dsDlB2HqbfWI/qLjHnJLhNfyFh9zUxN4aq8CIM5+u+kor5ZAZqpaI3ZJW98KzoM5/btM3zZSk2uyCvk6Ky6kXurjvxKjgG5MGPYIE1Kc/ADuK5la8Gj0ThupQkGhCBZwc0iVl6v/yKtcFjLaP8rP4MH9WXQJ+a0FXTdMAZS0rwSa07BTHY3jZ6OY=
  - secure: PXeFlvFpG59djEabWGglyRV6WvbYfjWP0cj4Bft/p9o8gDY8PT7nr6fqFFpXS92ObzHtdtVtfeNq1arqbDMSox5k+qZiMgDJ0Exbkz7vG5Wlo+soJjWyWYeU+IYPjrNqBN2ffwORZVY9AkIl5Mm/du/ZAC2TtDJUhd0lkuExuXBiQuY2FcCVw0DtdOsvQ6Ey4erhyllAbHFL3zfGBhSjwkhy6EIWoqQWj3ncjXsuk+GkiDUCO49dm/Zq5nEfcqZZ/AmUoKSqd6RrdNxQuopr9u5pALl5QK69zuWWxpG/A3NhB4cq4l9JFLutfj4eY/5EJMLd6CeipB72yASjoMuPLql/b4E9d6NhJ84joDNQIyNUmQb5BH7UqxfFFHaiZXNfFYbvtIvYfgsexEZZLu0E0mngIwcF/1Gq+HngH0CkBtW02ZSduIidUY87sapJ2ENb8Jv+fhbucT4HlIVQBotWxm5zgxDVO4WV0aFWG7xRL/FWOlnxPopONWgWOdyDEnXMDyvqviedkK03E5h7vccSdFuhn21J275Z9I+S/6kNdxhnEA+ys3vJyUMR6lFoteJHu9EZWa3HGo/tlTxfpS+TvG8HaKPjlVvqUFLGfrG6R0B+Gf+8zMBMFYmg3g6n4PlvBKBWi+jpHaAzpNKqE0pHgLHxGIPFNG+FnDpfoWfXhUk=
  - secure: dCYgafIEGIkhrmy+sJ8qmCaTAFko09EhG0Lw3LhoxD+HTAj112BxcVl9w6Rcj0z7+PG9pKnhl8BXDasaybH3lDKPBoxIwjzM95XzOpK26BCKDiQSBWNmyC3JevWsDRQ0C1ZwqP9fB3G/W5mJx4/+NBzTjpq/xUQQSIqL33tIb4fZYbh+HMoFBcQ5VC76mwXBH6k7v4mxpoGtUIwWo0S2OhZVv3zjqb8L6OPQyzofMVlI6q2kO4NujttVHtxpAWvTz+iHqt9dg9msDivIyTXJZgRKnK4TEuFTVUAjP1o7Rr9fArlYSA2AUIy0lCu1q/bbziNPia7QtCtWICi3JbWoIxlcPnNoP4c76EFzAyA+iIwgHKtMkTP0lGLq1yVxRCRFzmQCwRyYIWOHqEjXPjhcwSleNNeeghU/f+02x3YyFH0nzXNeNr1SV+ipAF8kcbLlYvJ5tLMCks3Yx7kTBA+lDqnsl2z8WFFSsl22X30xbwe6FaD1naHsBg3PbD4nxxvlwyWh4ZsEb7G5DkYXWXA1+VrSQDS2ibnvtPdfoX+4XNAW+39HdCEpyd3YL15bsjcPoAIAcuLI3ePd4QD/2fWFaL/2AOkMoPiEZEiyr/zD752scCcOFdmL/9Fq6xwOSMLvLn+3iuEM0y9HP8bWkGbfmDPXhoRZQUIE6JuTPHVfkug=
